function shopsService(o,e){return{getShops:function(){return o.get(e.shops).then(function(o){return console.log(o),o.data}).catch(function(o){console.log(o)})}}}function authController(o,e,r){o.regForm={email:"",password:"",passwordConf:""},o.loginForm={email:"",password:""},o.emailFormat=/^[a-z]+[a-z0-9._]+@[a-z]+\.[a-z.]{2,5}$/,o.signUp=function(){r.set("registered",o.regForm),console.log(r),o.userForm.$valid&&(alert("registration success"),location.href="#/")},o.login=function(){o.registeredUser=r.get("registered"),console.log(o.registeredUser),null!==o.registeredUser&&o.registeredUser.email==o.loginForm.email&&o.registeredUser.password==o.loginForm.password?(e.loggedUser=o.loginForm,r.set("logged",o.loginForm),location.href="#/shops"):alert("incorrect email or password")},o.logOut=function(){delete e.loggedUser,r.remove("logged")}}function shopsController(o,e,r){r.loggedUser?e.getShops().then(function(e){o.shops=e}).catch(function(o){console.log(o)}):location.href="#/restricted"}angular.module("appModule",["ngRoute","authModule","LocalStorageModule","shopsModule","ui.bootstrap","angularUtils.directives.dirPagination"]).run(["localStorageService","$rootScope",function(o,e){e.loggedUser=o.get("logged"),console.log(e.loggedUser)}]).directive("matchPassword",function(){return{require:"ngModel",scope:{otherModelValue:"=matchPassword"},link:function(o,e,r,t){t.$validators.matchPassword=function(e){return e==o.otherModelValue},o.$watch("otherModelValue",function(){t.$validate()})}}}),angular.module("authModule",[]),angular.module("shopsModule",[]),angular.module("appModule").config(["$routeProvider","$locationProvider","localStorageServiceProvider",function(o,e,r){r.setPrefix("around").setStorageType("localStorage").setNotify(!0,!0),e.hashPrefix(""),o.when("/login",{templateUrl:"./views/auth/login/login.html",controller:"authController"}).when("/registration",{templateUrl:"./views/auth/registration/registration.html",controller:"authController"}).when("/shops",{templateUrl:"./views/shops/shops.html",controller:"shopsController"}).when("/restricted",{templateUrl:"./views/auth/restricted/restricted.html"})}]),angular.module("appModule").constant("config",{shops:"http://www.json-generator.com/api/json/get/bZTcBnsIgO"}),angular.module("shopsModule").factory("shopsService",shopsService),shopsService.$inject=["$http","config"],angular.module("authModule").controller("authController",authController),authController.$inject=["$scope","$rootScope","localStorageService"],angular.module("shopsModule").controller("shopsController",shopsController),shopsController.$inject=["$scope","shopsService","$rootScope"];